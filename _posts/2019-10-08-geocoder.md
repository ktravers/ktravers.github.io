---
layout: post
title: Geocoder Dos and Do Nots
---

I was working on a project recently where we needed to 1) track the location of bands on tour and 2) give fans a way to see which of their favorite bands were playing near them on any given night. Perfect use case for the [Ruby `geocoder` gem](https://github.com/alexreisner/geocoder), right?

This gem is a long-lived fan favorite in the Ruby community, first [released in 2009](https://github.com/alexreisner/geocoder/releases?after=0.8.7) and [used by upwards of 23.5k projects](https://github.com/alexreisner/geocoder/network/dependents?package_id=UGFja2FnZS02MjgyNQ%3D%3D). However, this was my first time working with it, and I managed to bungle my first implementation. I wanted to share my journey from sad path to happy path, in hopes that it'll help someone else out there, too.


## What Didn't Work 🙅‍♀️




  - Separate `locations` table associated to my model
  - lat and long lived on locations table, not my model




## What Worked 🏄‍♀️


  - lat and long fields on my model
  - stubbed address method that returns nil
  - when serializing model, `try(:distance)` for distance (not always available)


## References

- [Geocoder gem site](http://www.rubygeocoder.com/)
- [Geocoder gem source code](https://github.com/alexreisner/geocoder)
